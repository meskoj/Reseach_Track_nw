<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>assignment_2_2023: nodeC.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">assignment_2_2023
   &#160;<span id="projectnumber">0.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">nodeC.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Service node that retrieves information about the speed and the distance from the goal.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;ros/ros.h&gt;</code><br />
<code>#include &lt;assignment_2_2023/robotInfo.h&gt;</code><br />
<code>#include &lt;assignment_2_2023/robotInfoSrv.h&gt;</code><br />
<code>#include &lt;assignment_2_2023/GetCoordinates.h&gt;</code><br />
<code>#include &lt;cmath&gt;</code><br />
<code>#include &lt;deque&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for nodeC.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="node_c_8cpp__incl.png" border="0" usemap="#node_c_8cpp" alt=""/></div>
<map name="node_c_8cpp" id="node_c_8cpp">
<area shape="rect" title="Service node that retrieves information about the speed and the distance from the goal." alt="" coords="555,5,646,32"/>
<area shape="rect" title=" " alt="" coords="5,87,84,114"/>
<area shape="rect" title=" " alt="" coords="109,87,335,114"/>
<area shape="rect" title=" " alt="" coords="360,80,575,121"/>
<area shape="rect" title=" " alt="" coords="599,87,869,114"/>
<area shape="rect" title=" " alt="" coords="893,87,956,114"/>
<area shape="rect" title=" " alt="" coords="980,87,1043,114"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a666a240ccefe69681431ba7a5bf6721d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="node_c_8cpp.html#a666a240ccefe69681431ba7a5bf6721d">robotInfoCallback</a> (const assignment_2_2023::robotInfo::ConstPtr &amp;msg)</td></tr>
<tr class="separator:a666a240ccefe69681431ba7a5bf6721d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c64f4c1ba679080c1041485f7df9fcf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="node_c_8cpp.html#a1c64f4c1ba679080c1041485f7df9fcf">computeInfo</a> (assignment_2_2023::robotInfoSrv::Request &amp;req, assignment_2_2023::robotInfoSrv::Response &amp;res)</td></tr>
<tr class="separator:a1c64f4c1ba679080c1041485f7df9fcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memItemLeft" align="right" valign="top"><a id="a3c04138a5bfe5d72780bb7e82a18e627"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>main</b> (int argc, char **argv)</td></tr>
<tr class="separator:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:af88b946fb90d5f08b5fb740c70e98c10"><td class="memItemLeft" align="right" valign="top"><a id="af88b946fb90d5f08b5fb740c70e98c10"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>x</b></td></tr>
<tr class="separator:af88b946fb90d5f08b5fb740c70e98c10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab927965981178aa1fba979a37168db2a"><td class="memItemLeft" align="right" valign="top"><a id="ab927965981178aa1fba979a37168db2a"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>y</b></td></tr>
<tr class="separator:ab927965981178aa1fba979a37168db2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f448411506dae975d3cf75651e3b693"><td class="memItemLeft" align="right" valign="top"><a id="a9f448411506dae975d3cf75651e3b693"></a>
std::deque&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>vel_x_buffer</b></td></tr>
<tr class="separator:a9f448411506dae975d3cf75651e3b693"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6939fc51b711fb013036cd0a54aa50ad"><td class="memItemLeft" align="right" valign="top"><a id="a6939fc51b711fb013036cd0a54aa50ad"></a>
std::deque&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>vel_z_buffer</b></td></tr>
<tr class="separator:a6939fc51b711fb013036cd0a54aa50ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fd9c1c124a8f8d1b3dc0f3dd2b29e96"><td class="memItemLeft" align="right" valign="top"><a id="a9fd9c1c124a8f8d1b3dc0f3dd2b29e96"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>averaging_window</b></td></tr>
<tr class="separator:a9fd9c1c124a8f8d1b3dc0f3dd2b29e96"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Service node that retrieves information about the speed and the distance from the goal. </p>
<dl class="section author"><dt>Author</dt><dd>Marco Meschini </dd></dl>
<dl class="section version"><dt>Version</dt><dd>0.2 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>29/02/2024</dd></dl>
<p>Subscribes to:<br  />
 /actual_info</p>
<p>Service: <br  />
 last_coordinates <br  />
 robotInfoSrv</p>
<p>Description:<br  />
 this node implements a service server to relay information about the robot's distance from the target and its average velocity. The script collects real-time data on the robot's position and velocities through the '\robotInfo' topic, where messages are published by the client. Additionally, it retrieves target coordinates using the service implemented in Node B. To formulate its service response, the script computes the distance and the average speed. Notably, the speed calculation incorporates an averaging window, the size of which, is determined by a server parameter, set from the launch file. To achieve this, a First-In-First-Out (FIFO) buffer is created. Velocities from the received messages are continually inserted into this buffer and then the average speed is computed using the specified averaging window size. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a1c64f4c1ba679080c1041485f7df9fcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c64f4c1ba679080c1041485f7df9fcf">&#9670;&nbsp;</a></span>computeInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool computeInfo </td>
          <td>(</td>
          <td class="paramtype">assignment_2_2023::robotInfoSrv::Request &amp;&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">assignment_2_2023::robotInfoSrv::Response &amp;&#160;</td>
          <td class="paramname"><em>res</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Compute the actual speed and the distance from the target </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">robotInfoSrv_request</td><td></td></tr>
    <tr><td class="paramname">robotInfoSrv_response</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if there are coordinates set as target, otherwise false</dd></dl>

</div>
</div>
<a id="a666a240ccefe69681431ba7a5bf6721d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a666a240ccefe69681431ba7a5bf6721d">&#9670;&nbsp;</a></span>robotInfoCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void robotInfoCallback </td>
          <td>(</td>
          <td class="paramtype">const assignment_2_2023::robotInfo::ConstPtr &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Store information about the actual speed </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">robotInfo_msg</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
